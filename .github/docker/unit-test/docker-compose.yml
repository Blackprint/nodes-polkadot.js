## Run this command to setup and run the container (force recreate to clear old logs)
#> docker-compose up --force-recreate
version: '3.7'

services:
  blackprint-app:
    build: .
    restart: always
    environment:
      - MNEMONIC_A=burden trip pass airport nothing crouch flame blood toilet program pause peace
      - WALLET_ADDRESS_A=15svm89ghWWiqjYWTKGxJyfkzcAL5Jm4HefZx3KFZaaFADrq

      - MNEMONIC_B=physical west coin next mimic detail trip say slide nature hedgehog lawsuit
      - WALLET_ADDRESS_B=15mkG9s2UbMikaEgvnd3vgVJKiY2n2DpH5MmrjnCREwsLsnN

    ## Run unit test: Blackprint module for Polkadot.js
    command: sh -c 'cd /app/nodes-polkadot.js && pnpm i && npm run build-prod && npm test'

## Note:
# If you see "Segmentation fault (core dumped)" when testing with Jest, please re-run the test again
# https://github.com/facebook/jest/issues/10662